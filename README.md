# Fixed Income Portfolio Monitoring Dashboard 
A one-click, notebook-based monitoring workflow for a fixed income portfolio using liquid ETFs as implementation vehicles.  
It produces a **3-page monitoring pack (PDF)** plus exported **CSV/PNG outputs**, covering:  
**(1) daily as-of snapshot**, **(2) weekly breach trend & top drivers**, and **(3) rebalance proposal (pre vs post vs constrained)**.

---

## Outputs (what you get)

### 1) 3-page Monitoring Pack (PDF)
- **Page 1 â€” One-page Summary (as-of)**  
  Top active weight deviations, duration vs benchmark (last ~1Y), DV01 by holding, and summary tables.
- **Page 2 â€” Weekly Monitoring Pack (Trend & Drivers)**  
  Weekly alert days, weekly peak daily alerts, and top alert drivers (rules + holdings).
- **Page 3 â€” Rebalance Pack**  
  PRE vs POST_BM vs POST_CONS comparison and proposed trades.

ðŸ“Œ PDF: `outputs/20260206_FixedIncome_MonitoringPack_3pages.pdf`

### 2) CSV exports (for audit / downstream dashboards)
Exported under `outputs/`:
- `today_positions.csv`
- `portfolio_summary.csv`
- `sector_exposure.csv`
- `rating_exposure.csv`
- `alerts.csv`
- `rebalance_orders.csv` (if enabled)

### 3) PNG exports (charts)
Exported under `outputs/` with consistent naming, DPI, and layout:
- `*_one_page_summary.png`
- `*_weekly_pack.png`
- `*_rebalance_pack.png`
- other supporting plots

---

## Key Concepts (how to read it)

### Portfolio vs Benchmark
- **Benchmark** is represented by a **proxy weight vector** (e.g., US core FI proxy).
- **Active weight** = `portfolio_weight - benchmark_weight`  
  Used to monitor deviations and drive rebalancing priorities.

### Duration / DV01
- **Portfolio Duration** is computed as a weighted average of holding-level duration.
- **DV01** approximates interest rate risk sensitivity:
  - Conceptually: a $1bp move in yield changes the portfolio value by DV01 amount.
  - Used to identify which holdings dominate rate risk.

### Rule Engine (Alerts)
Alerts are generated by checking portfolio metrics against limits (examples):
- Single-name weight > max limit
- Cash proxy weight < minimum
- Duration out of range
- Active weight deviation exceeds threshold

The weekly pack aggregates these alerts to show:
- **Weekly alert days** (how many days per week triggered alerts)
- **Weekly peak daily alerts** (stress indicator)
- **Top drivers** (rules + holdings contributing most)

---

## Rebalance Logic (what â€œPOSTâ€ means)

This project includes two rebalance styles:

1) **POST_BM (to Benchmark)**  
   Rebalance toward benchmark weights.

2) **POST_CONS (Constrained)**  
   Rebalance toward benchmark **under constraints**, e.g.:
   - max single-name weight
   - min cash proxy weight
   - (optional) duration band / sector caps

The rebalance pack compares **PRE vs POST_BM vs POST_CONS** using:
- active weights
- breach/warn counts
- proposed trades (shares + notional)

---

## Data Model (why ETFs)
Although monitoring roles often cover funds/bonds, ETFs are used here as **liquid implementation vehicles**:
- similar exposures (rates, IG, HY, TIPS, cash proxy)
- easy to obtain price history
- simplifies demonstration while preserving monitoring logic

Core tables:
- `security_master` (instrument metadata: sector, rating bucket, group)
- `duration_monthly` (duration by month, forward-filled to daily)
- `benchmark_weights` (proxy benchmark weights)
- market prices (daily)

---

## How to Run (one-click)

### Option A â€” Jupyter Notebook
1. Open `Fixed_Income_Portfolio_Monitor_one_click_PACK_v3.ipynb`
2. Run **Run All**
3. Check `outputs/` for CSV/PNG and the 3-page PDF

### Dependencies
Install:
```bash
pip install -r requirements.txt
